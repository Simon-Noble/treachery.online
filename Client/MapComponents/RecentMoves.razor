@using Treachery.Shared
@inherits MapComponent

@{
    if (Skin.Current.ShowArrowsForRecentMoves && h.Game.CurrentMainPhase == MainPhase.ShipmentAndMove)
    {
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="@(@Skin.Current.PlanetRadius * 2)" height="@(@Skin.Current.PlanetRadius * 2)" style="position: absolute; left: 0px; top:0px; height: 100%; width: 100%;">
            
            @foreach (var move in h.Game.RecentMoves.Where(move => !move.Passed))
            {
                var to = move.To.Center;

                foreach (var from in move.ForceLocations.Keys)
                {
                    var a = CloserTo(from.Center, to, 0.10f);
                    var b = CloserTo(to, from.Center, 0.15f);

                    <Arrow FillColor="@Skin.Current.FactionColor[move.Initiator]" StrokeColor="@Skin.Current.FactionColorTransparant[move.Initiator]"
                            MarginX="0" MarginY="0"
                            Radius="@Skin.Current.PlanetRadius"
                            From="a" To="b" Scale="0.35f" />
                }
            }

        </svg>
    }
}

@code {

}