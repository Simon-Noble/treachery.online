<!--
 * Copyright 2020-2023 Ronald Ossendrijver. All rights reserved.
--->
@using Treachery.Shared
@using System.Linq;

@foreach (var f in Factions.Where(f => f != Faction.None))
{
    <img class="img-fluid" src="@Skin.Current.GetImageURL(f)" width="@Diameter" height="@Diameter" title=@Skin.Current.Describe(f) style="@Shadow" />
}

@code {

    [Parameter]
    public IEnumerable<Faction> Factions { get; set; } = Array.Empty<Faction>();

    [Parameter]
    public Dictionary<Faction, string> Labels { get; set; }

    [Parameter]
    public int Diameter { get; set; } = 30;

    [Parameter]
    public bool HasShadow { get; set; } = true;

    private string Shadow => HasShadow ? "filter: drop-shadow(1px 1px 1px black);" : "";

    protected override void OnParametersSet()
    {
        if (Labels == null)
        {
            Labels = Factions.ToDictionary(f => f, f => Skin.Current.Describe(f));
        }
    }
}
