@*
 * Copyright (C) 2020-2024 Ronald Ossendrijver (admin@treachery.online)
 * This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This
 * program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. You should have
 * received a copy of the GNU General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.
*@
@using Treachery.Client.GameEventComponents
@inherits GameComponent;

@if (!Client.IsHost && Client.CurrentPhase == Phase.AwaitingPlayers)
{
    <AwaitingGameComponent Client="@Client" />
}

@if (Client.Actions.Contains(typeof(EstablishPlayers)))
{
    <EstablishPlayersComponent Client="@Client" />
}

@if (Client.Game.CurrentPhase == Phase.Bidding)
{
    <NormalBiddingPanel Client="Client" CanBid="Client.Actions.Contains(typeof(Bid))" />
}

@if (Client.Game.CurrentPhase == Phase.BlackMarketBidding)
{
    <BlackMarketBiddingPanel Client="Client" CanBid="Client.Actions.Contains(typeof(BlackMarketBid))" />
}

@foreach (var a in Client.Actions)
{
    switch (a.Name)
    {
        case "FactionSelected":
            {
                <FactionSelectedComponent Client="@Client" />
            }
            break;
        case "FactionTradeOffered":
            {
                <FactionTradeOfferedComponent Client="@Client" />
            }
            break;
        case "SkillAssigned":
            {
                <SkillAssignedComponent Client="@Client" />
            }
            break;
        case "DiscoveryEntered":
            {
                <DiscoveryEnteredComponent Client="@Client" />
            }
            break;
        case "StormDialled":
            {
                <StormDialledComponent Client="@Client" />
            }
            break;
        case "TestingStationUsed":
            {
                <TestingStationUsedComponent Client="@Client" />
            }
            break;
        case "CardsDetermined":
            {
                <CardsDeterminedComponent Client="@Client" />
            }
            break;
        case "PerformSetup":
            {
                <PerformSetupComponent Client="@Client" />
            }
            break;
        case "PerformYellowSetup":
            {
                <PerformYellowSetupComponent Client="@Client" />
            }
            break;
        case "BluePrediction":
            {
                <BluePredictionComponent Client="@Client" />
            }
            break;
        case "PerformBluePlacement":
            {
                <PerformBluePlacementComponent Client="@Client" />
            }
            break;
        case "PerformCyanSetup":
            {
                <PerformCyanSetupComponent Client="@Client" />
            }
            break;
        case "MulliganPerformed":
            {
                <MulliganPerformedComponent Client="@Client" />
            }
            break;
        case "TraitorsSelected":
            {
                <TraitorsSelectedComponent Client="@Client" />
            }
            break;
        case "StormSpellPlayed":
            {
                <StormSpellPlayedComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.StormSpell)" />
            }
            break;
        case "MetheorPlayed":
            {
                <SimpleActionComponent GameEventType="MetheorPlayed" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Metheor)" Title="@DescribeCard(TreacheryCardType.Metheor)" Alert="false" ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Metheor)" />
            }
            break;
        case "TakeLosses":
            {
                <TakeLossesComponent Client="@Client" />
            }
            break;
        case "NexusVoted":
            {
                <YesNoActionComponent GameEventType="NexusVoted" Client="@Client" Title="Should a Nexus occur?" Alert="true" />
            }
            break;
        case "YellowSentMonster":
            {
                <YellowSentMonsterComponent Client="@Client" />
            }
            break;
        case "YellowRidesMonster":
            {
                <YellowRideComponent Client="@Client" />
            }
            break;
        case "AllianceOffered":
            {
                <AllianceOfferedComponent Client="@Client" />
            }
            break;
        case "AllianceBroken":
            {
                <SimpleActionComponent GameEventType="AllianceBroken" Client="@Client" Title="Break your current alliance?" Alert="false" ConfirmLabel="Break" />
            }
            break;
        case "NexusCardDrawn":
            {
                <NexusCardDrawnComponent Client="@Client" />
            }
            break;
        case "CharityClaimed":
            {
                <SimpleActionComponent GameEventType="CharityClaimed" Client="@Client" Title="Claim Charity?" Alert="false" ConfirmLabel="Claim" />
            }
            break;
        case "Revival":
            {
                <RevivalComponent Client="@Client" />
            }
            break;
        case "Shipment":
            {
                <ShipmentComponent Client="@Client" />
            }
            break;
        case "OrangeDelay":
            {
                <SimpleActionComponent GameEventType="OrangeDelay" Client="@Client" Title="Delay your turn?" Alert="true" ConfirmLabel="Delay" AllowAutoConfirm="true"/>
            }
            break;
        case "BlueAccompanies":
            {
                <BlueAccompaniesComponent Client="@Client" />
            }
            break;
        case "BlueFlip":
            {
                <BlueFlipComponent Client="@Client" />
            }
            break;
        case "TerrorRevealed":
            {
                <TerrorRevealedComponent Client="@Client" />
            }
            break;
        case "AmbassadorActivated":
            {
                <AmbassadorActivatedComponent Client="@Client" />
            }
            break;
            case "AllianceByTerror":
            {
                <YesNoActionComponent GameEventType="AllianceByTerror" Client="@Client" Title=@Skin.Current.Format("Enter an alliance with {0}?", Faction.Cyan) Alert="true" />
            }
            break;
        case "AllianceByAmbassador":
            {
                <YesNoActionComponent GameEventType="AllianceByAmbassador" Client="@Client" Title=@Skin.Current.Format("Enter an alliance with {0}?", Faction.Pink) Alert="true" />
            }
            break;
        case "NexusPlayed":
            {
                <NexusPlayedComponent Client="@Client" />
            }
            break;
        case "BlueBattleAnnouncement":
            {
                <BlueBattleAnnouncementComponent Client="@Client" />
            }
            break;
        case "Move":
            {
                <MoveComponent Client="@Client" />
            }
            break;
        case "Caravan":
            {
                <CaravanComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Caravan)" />
            }
            break;
        case "BattleInitiated":
            {
                <BattleInitiatedComponent Client="@Client" />
            }
            break;
        case "BattleClaimed":
            {
                var title = Faction == Faction.Pink ? 
                    Skin.Current.Format("Do you wish to fight in {0}? Otherwise, your ally will.", Game.BattleAboutToStart.Territory) : 
                    Skin.Current.Format("Should {0} fight the battle in {1}?", Faction.Pink, Game.BattleAboutToStart.Territory);

                <YesNoActionComponent GameEventType="BattleClaimed" Client="@Client" Title=@title Alert="true" />
            }
            break;
        case "Voice":
            {
                <VoiceComponent Client="@Client" />
            }
            break;
        case "Prescience":
            {
                <PrescienceComponent Client="@Client" />
            }
            break;
        case "Battle":
            {
                <BattleComponent Client="@Client" />
            }
            break;
        case "BattleRevision":
            {
                <SimpleActionComponent GameEventType="BattleRevision" Client="@Client" Title="Change your battle plan?" Alert="false" ConfirmLabel="Change Plan" />
            }
            break;
        case "TreacheryCalled":
            {
                <TreacheryCalledComponent Client="@Client" />
            }
            break;
        case "FaceDancerRevealed":
            {
                <FaceDancerRevealedComponent Client="@Client" />
            }
            break;
        case "BattleConcluded":
            {
                <BattleConcludedComponent Client="@Client" />
            }
            break;
        case "LoserConcluded":
            {
                <LoserConcludedComponent Client="@Client" />
            }
            break;
        case "DivideResources":
            {
                <DivideResourcesComponent Client="@Client" />
            }
            break;
        case "DivideResourcesAccepted":
            {
                <YesNoActionComponent GameEventType="DivideResourcesAccepted" Client="@Client" Title=@Skin.Current.Format("Agree with the proposed division of {0}?", Concept.Resource) Alert="true" />
            }
            break;
        case "DiscoveryRevealed":
            {
                <DiscoveryRevealedComponent Client="@Client" />
            }
            break;
        case "CardGiven":
            {
                <YesNoActionComponent GameEventType="CardGiven" Client="@Client" Title=@Skin.Current.Format("Give your ally the {0} you just received?", Game.CardThatMustBeKeptOrGivenToAlly) Alert="true" />
            }
            break;
        case "RaiseDeadPlayed":
            {
                <RaiseDeadComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.RaiseDead)" />
            }
            break;
        case "Donated":
            {
                <DonatedComponent Client="@Client" />
            }
            break;
        case "ResourcesTransferred":
            {
                <ResourcesTransferredComponent Client="@Client" />
            }
            break;
        case "WhiteGaveCard":
            {
                <WhiteGaveCardComponent Client="@Client" />
            }
            break;
        case "AllyPermission":
            {
                <AllyPermissionComponent Client="@Client" />
            }
            break;
        case "ClairVoyancePlayed":
            {
                <ClairVoyancePlayedComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Clairvoyance)" />
            }
            break;
        case "ClairVoyanceAnswered":
            {
                <ClairVoyanceAnsweredComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Clairvoyance)" />
            }
            break;
        case "KarmaHandSwapInitiated":
            {
                <KarmaHandSwapInitiatedComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaShipmentPrevention":
            {
                <KarmaShipmentPreventionComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaRevivalPrevention":
            {
                <KarmaRevivalPreventionComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaHandSwap":
            {
                <KarmaHandSwapComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaFreeRevival":
            {
                <KarmaFreeRevivalComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaHmsMovement":
            {
                <KarmaHmsMovementComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaMonster":
            {
                <KarmaMonsterComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaPrescience":
            {
                <SimpleActionComponent GameEventType="KarmaPrescience" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" Title="@Skin.Current.Format("Use {0} to see the entire enemy battle plan", TreacheryCardType.Karma)" Alert="false" ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaPinkDial":
            {
                <SimpleActionComponent GameEventType="KarmaPinkDial" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" Title="@Skin.Current.Format("Use {0} to add the difference between the leader discs to your dial", TreacheryCardType.Karma)" Alert="false" ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Karma)" />
            }
            break;
        case "KarmaWhiteBuy":
            {
                <KarmaWhiteBuyComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "Karma":
            {
                <KarmaComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "FaceDanced":
            {
                <FaceDancedComponent Client="@Client" />
            }
            break;
        case "FaceDancerReplaced":
            {
                <FaceDancerReplacedComponent Client="@Client" />
            }
            break;
        case "SetIncreasedRevivalLimits":
            {
                <SetIncreasedRevivalLimitsComponent Client="@Client" />
            }
            break;
        case "SetShipmentPermission":
            {
                <SetShipmentPermissionComponent Client="@Client" />
            }
            break;
        case "RedBidSupport":
            {
                <RedBidSupportComponent Client="@Client" />
            }
            break;
        case "RequestPurpleRevival":
            {
                <RequestPurpleRevivalComponent Client="@Client" />
            }
            break;
        case "AcceptOrCancelPurpleRevival":
            {
                <AcceptOrCancelPurpleRevivalComponent Client="@Client" />
            }
            break;
        case "AmalPlayed":
            {
                <SimpleActionComponent GameEventType="AmalPlayed" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Amal)" Title="@DescribeCard(TreacheryCardType.Amal)" Alert="false" ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Amal)" />
            }
            break;
        case "RecruitsPlayed":
            {
                <SimpleActionComponent GameEventType="RecruitsPlayed" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Recruits)" Title="@DescribeCard(TreacheryCardType.Recruits)" Alert="false" ConfirmLabel="@Skin.Current.Format("Play {0}", TreacheryCardType.Recruits)" />
            }
            break;
        case "WhiteAnnouncesBlackMarket":
            {
                <WhiteAnnouncesBlackMarketComponent Client="@Client" />
            }
            break;
        case "GreyRemovedCardFromAuction":
            {
                <GreyRemovedCardFromAuctionComponent Client="@Client" />
            }
            break;
        case "GreySelectedStartingCard":
            {
                <GreySelectedStartingCardComponent Client="@Client" />
            }
            break;
        case "GreySwappedCardOnBid":
            {
                <GreySwappedCardOnBidComponent Client="@Client" />
            }
            break;
        case "PerformHmsMovement":
            {
                <PerformHmsMovementComponent Client="@Client" />
            }
            break;
        case "PerformHmsPlacement":
            {
                <PerformHmsPlacementComponent Client="@Client" />
            }
            break;
        case "HarvesterPlayed":
            {
                <SimpleActionComponent GameEventType="HarvesterPlayed" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Harvester)" Title="@DescribeCard(TreacheryCardType.Harvester)" Alert="false" ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Harvester)" />
            }
            break;
        case "PoisonToothCancelled":
            {
                <SimpleActionComponent GameEventType="PoisonToothCancelled" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.PoisonTooth)" Title="Cancel Poison Tooth?" Alert="false" ConfirmLabel="Cancel" />
            }
            break;
        case "ReplacedCardWon":
            {
                <ReplacedCardWonComponent Client="@Client" />
            }
            break;
        case "ThumperPlayed":
            {
                <SimpleActionComponent GameEventType="ThumperPlayed" Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Thumper)" Title="@DescribeCard(TreacheryCardType.Thumper)" Alert="false" ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Thumper)" />
            }
            break;
        case "HideSecrets":
            {
                <SimpleActionComponent GameEventType="HideSecrets" Client="@Client" Title="Hide your secret info (like cards and traitors) from other players at the end of the game?" ConfirmLabel="Yes" Alert="true" Dismissable="true" DismissLabel="No" />
            }
            break;
        case "DealOffered":
            {
                <DealOfferedComponent Client="@Client" />
            }
            break;
        case "Discarded":
            {
                <DiscardedComponent Client="@Client" />
            }
            break;
        case "RedDiscarded":
            {
                <RedDiscardedComponent Client="@Client" />
            }
            break;
        case "TraitorDiscarded":
            {
                <TraitorDiscardedComponent Client="@Client" />
            }
            break;
        case "BrownDiscarded":
            {
                <BrownDiscardedComponent Client="@Client" />
            }
            break;
        case "TerrorPlanted":
            {
                <TerrorPlantedComponent Client="@Client" />
            }
            break;
        case "AmbassadorPlaced":
            {
                <AmbassadorPlacedComponent Client="@Client" />
            }
            break;
        case "ExtortionPrevented":
            {
                var title = Skin.Current.Format("Pay 3 to prevent {0} regaining their {1} token?", Faction.Cyan, TerrorType.Extortion);
                <SimpleActionComponent GameEventType="ExtortionPrevented" Client="@Client" Title=@title ConfirmLabel="Yes" Alert="false" />
            }
            break;
        case "BrownEconomics":
            {
                <BrownEconomicsComponent Client="@Client" />
            }
            break;
        case "CardTraded":
            {
                <CardTradedComponent Client="@Client" />
            }
            break;
        case "KarmaBrownDiscard":
            {
                <KarmaBrownDiscardComponent Client="@Client" BackgroundImage="@GetImage(TreacheryCardType.Karma)" />
            }
            break;
        case "AuditCancelled":
            {
                <AuditCancelledComponent Client="@Client" />
            }
            break;
        case "Audited":
            {
                <AuditedComponent Client="@Client" />
            }
            break;
        case "ResourcesAudited":
            {
                <ResourcesAuditedComponent Client="@Client" />
            }
            break;
        case "BrownExtraMove":
            {
                var cardToUse = BrownExtraMove.CardToUse(Client.Player);
                var title = Skin.Current.Format("Use {0} to be able to move your forces one extra territory?", cardToUse != null ? Name(cardToUse) : "Nexus Cunning");
                var background = cardToUse != null ? Skin.Current.GetImageURL(cardToUse) : Skin.Current.GetNexusCardImageURL(Faction.Brown);
                <SimpleActionComponent GameEventType="BrownExtraMove" Client="@Client" BackgroundImage=@background Title=@title Alert="false" />
            }
            break;
        case "BrownMovePrevention":
            {
                <BrownMovePreventionComponent Client="@Client" />
            }
            break;
        case "BrownKarmaPrevention":
            {
                <BrownKarmaPreventionComponent Client="@Client" />
            }
            break;
        case "BrownFreeRevivalPrevention":
            {
                <BrownFreeRevivalPreventionComponent Client="@Client" />
            }
            break;
        case "BrownRemoveForce":
            {
                <BrownRemoveForceComponent Client="@Client" />
            }
            break;
        case "WhiteAnnouncesAuction":
            {
                <WhiteAnnouncesAuctionComponent Client="@Client" />
            }
            break;
        case "WhiteSpecifiesAuction":
            {
                <WhiteSpecifiesAuctionComponent Client="@Client" />
            }
            break;
        case "WhiteKeepsUnsoldCard":
            {
                <WhiteKeepsUnsoldCardComponent Client="@Client" />
            }
            break;
        case "WhiteRevealedNoField":
            {
                <SimpleActionComponent GameEventType="WhiteRevealedNoField" Client="@Client"
                                        IsFactionSpecific=Faction.White
                                        Title="@Skin.Current.Format("Reveal your currently active No-Field of {0}, placing {1} forces?", Client.Game.CurrentNoFieldValue, Math.Min(Client.Game.CurrentNoFieldValue, Client.Player.ForcesInReserve))"
                                        ConfirmLabel="Reveal" />
            }
            break;
        case "ResidualPlayed":
            {
                <SimpleActionComponent GameEventType="ResidualPlayed" Client="@Client"
                                        BackgroundImage="@GetImage(TreacheryCardType.Residual)"
                                        Title="@Skin.Current.Format("Use {0} to kill a random available opponent leader?", TreacheryCardType.Residual)"
                                        ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.Residual)" />
            }
            break;
        case "FlightUsed":
            {
                <FlightUsedComponent Client="@Client" />
            }
            break;
        case "FlightDiscoveryUsed":
            {
                <SimpleActionComponent GameEventType="FlightDiscoveryUsed" Client="@Client" Title=@Skin.Current.Format("Use your {0} Discovery Token to gain extra movement speed?", DiscoveryToken.Flight) Alert="false" ConfirmLabel="Yes" />
            }
            break;
        case "RockWasMelted":
            {
                <RockWasMeltedComponent Client="@Client" />
            }
            break;
        case "DistransUsed":
            {
                <DistransUsedComponent Client="@Client" />
            }
            break;
        case "DiscardedTaken":
            {
                <DiscardedTakenComponent Client="@Client" />
            }
            break;
        case "DiscardedSearchedAnnounced":
            {
                <SimpleActionComponent GameEventType="DiscardedSearchedAnnounced" Client="@Client"
                                        BackgroundImage="@GetImage(TreacheryCardType.SearchDiscarded)"
                                        Title="@Skin.Current.Format("Use {0} to pay 2 and search and take a card from the treachery discard pile?", TreacheryCardType.SearchDiscarded)"
                                        ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.SearchDiscarded)" />
            }
            break;
        case "DiscardedSearched":
            {
                <DiscardedSearchedComponent Client="@Client" />
            }
            break;
        case "JuicePlayed":
            {
                <JuicePlayedComponent Client="@Client" />
            }
            break;
        case "PortableAntidoteUsed":
            {
                <SimpleActionComponent GameEventType="PortableAntidoteUsed" Client="@Client"
                                        BackgroundImage="@GetImage(TreacheryCardType.PortableAntidote)"
                                        Title="@Skin.Current.Format("Use your {0}?", TreacheryCardType.PortableAntidote)"
                                        ConfirmLabel="@Skin.Current.Format("Use {0}", TreacheryCardType.PortableAntidote)" />
            }
            break;
        case "Bureaucracy":
            {
                <YesNoActionComponent GameEventType="Bureaucracy" Client="@Client" BackgroundImage="@Skin.Current.GetImageURL(LeaderSkill.Bureaucrat)" Title="@Skin.Current.Format("Use your {0} skill?", LeaderSkill.Bureaucrat)" Alert="true" />
            }
            break;
        case "Captured":
            {
                <YesNoActionComponent GameEventType="Captured" Client="@Client" Title="Do you wish to capture a random leader from your opponent?" Alert="true" ForFaction="Faction.Black" />
            }
            break;
        case "Diplomacy":
            {
                <DiplomacyComponent Client="@Client" />
            }
            break;
        case "SwitchedSkilledLeader":
            {
                var skilledLeader = SwitchedSkilledLeader.SwitchableLeader(Game, Player);
                var title = Skin.Current.Format("Place {0} {1} your player shield?", skilledLeader, Client.Game.IsInFrontOfShield(skilledLeader) ? "behind" : "in front of");
                var confirmLabel = Skin.Current.Format("Put {0} shield", Client.Game.IsInFrontOfShield(skilledLeader) ? "behind" : "in front of");

                <SimpleActionComponent GameEventType="SwitchedSkilledLeader" Client="@Client"
                        BackgroundImage="@Skin.Current.GetImageURL(Client.Game.Skill(skilledLeader))" Title="@title"
                        ConfirmLabel="@confirmLabel" />
            }
            break;
        case "Thought":
            {
                <ThoughtComponent Client="@Client" />
            }
            break;
        case "ThoughtAnswered":
            {
                <ThoughtAnsweredComponent Client="@Client" />
            }
            break;
        case "HMSAdvantageChosen":
            {
                <HMSAdvantageChosenComponent Client="@Client" />
            }
            break;
        case "Retreat":
            {
                <RetreatComponent Client="@Client" />
            }
            break;
        case "Planetology":
            {
                <PlanetologyComponent Client="@Client" />
            }
            break;
    }
}

@if (DealAccepted.CurrentDeals(Client.Game).Any() || (Client.IsPlayer && (DealAccepted.AcceptableDeals(Client.Game, Client.Player).Any() || DealAccepted.CancellableDeals(Client.Game, Client.Player).Any())))
{
    <DealComponent Client="@Client" />
}

@if (Client.Game.AssistedNotekeepingEnabled(Player))
{
    <NoteComponent Client="@Client" />
}

@if (Client.IsPlayer && Client.CurrentPhase >= Phase.SelectingTraitors && Client.IAm(Faction.Green))
{
    <TrackerComponent Client="@Client" />
}

@if (Client.Game.CurrentPhase == Phase.GameEnded && Client.IsHost && !Client.StatisticsSent && Client.Game.Players.Count() >= 4 && Client.Game.Players.Count(p => !p.IsBot) > Client.Game.Players.Count(p => p.IsBot))
{
    <UploadStatisticsComponent Client="@Client" />
}

@if (Client.Game.CurrentMainPhase != MainPhase.Ended && Client.Actions.Contains(typeof(PlayerReplaced)))
{
    <PlayerReplacedComponent Client="@Client" />
}

