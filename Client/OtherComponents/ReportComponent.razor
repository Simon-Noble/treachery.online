<!--
 * Copyright 2020-2021 Ronald Ossendrijver. All rights reserved.
--->

@using Treachery.Shared;
@using Treachery.Client.GenericComponents;
@inherits GameComponent

@{
    var messages = Report.Messages.Where(m => m.Target == Faction.None || m.Target == h.Faction).OrderByDescending(m => m.Nr).ToList();

    if (messages.Any())
    {

        <div class="card p-1 border-light pb-0" style="background-image: url('@Background'); background-size: cover; background-repeat: no-repeat">

            <div class="card-header text-center">@Title</div>

            <div class="card-body p-0 overflow-auto small" style="background-color:rgba(0,0,0,0.2);">

                @foreach (var message in Report.Messages.Where(m => m.Target == Faction.None || m.Target == h.Faction).OrderByDescending(m => m.Nr))
                {
                    <div class="mt-1 pl-1 pr-1" style="background-color:@Skin.Current.GetFactionColorTransparant(message.Initiator)">@message.ToString()</div>
                }

            </div>

        </div>
    }
}

@code {

    [Parameter]
    public Report Report { get; set; }

    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public string Background { get; set; }
}
